/*!CK:322409833!*//*1408337184,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xttYm"]); }

__d("Collection",[],function(a,b,c,d,e,f){function g(h,i){if(!h.__collection__){var j=new Function();for(var k in h.prototype)j.prototype[k]=g._call.bind(null,k);h.__collection__=j;}var l=new h.__collection__();l._elements=i;return l;}g._call=function(h){var i=Array.prototype.slice.call(arguments,1);this._elements.forEach(function(j){j[h].apply(j,i);});return this;};e.exports=g;},null);
__d("Drag",["Event","Arbiter","DOM","Style","Vector"],function(a,b,c,d,e,f,g,h,i,j,k){var l={};l.currentDraggable=null;l.grab=function(m){if(l.currentDraggable)l._onmouseup();m.lastDragOver=null;l.attachDragEvents();l.currentDraggable=m;};l.attachDragEvents=function(){document.onselectstart=function(){document.onselectstart=null;return false;};if(l.dragEventsAttached)return;l.dragEventsAttached=true;h.subscribe('scroller/scroll',l._onmousemove);g.listen(document,{mousemove:l._onmousemove,mouseup:l._onmouseup});};l.droppables={};l.addDroppable=function(m,n){(l.droppables[m]=l.droppables[m]||[]).push(n);};l.removeDroppable=function(m,n){l.droppables[m]=l.droppables[m].filter(function(o){return o!=n;});};l.getOffsetParent=function(m){if(i.isNodeOfType(m,['body','html']))return document.body;while((m=m.parentNode)&&m!==document.body)if(j.get(m,'position')!=='static')return m;return document.body;};l._onmousemove=function(event,m){if(!l.currentDraggable)return;var n=m||k.getEventPosition(event),o=l.currentDraggable,p=l.droppables[o.namespace];if(o.namespace&&o.active&&p){var q={};p.forEach(function(w){q[w.zIndex]=w.zIndex;});var r=[];for(var s in q)r.push(q[s]);r.sort();var t=o.lastDragOver,u=null;for(var v=r.length-1;v>=0;v--)if(t&&t.dom!=null&&t.zIndex==r[v]&&t.isDraggedOver(n)){u=t;break;}else for(s=0;s<p.length;s++){if(r[v]!=p[s].zIndex)continue;if(t!=p[s]&&o.dom!=p[s].dom&&p[s].isDraggedOver(n)){u=p[s];v=-1;break;}}if(u&&u!=t){u.ondragover(o);l.currentDraggable.adjustCursorPosition();}if(u)u.ondragmove(o,n.sub(k.getElementPosition(u.dom)));o.lastDragOver=u;}l.currentDraggable._onmousemove(n);};l._onmouseup=function(m){document.onselectstart=null;if(l.currentDraggable){l.currentDraggable._ondrop();l.currentDraggable=null;}};e.exports=l;},null);
__d("Draggable",["Event","Arbiter","Collection","DOM","Drag","Rect","Style","Vector","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(s){"use strict";this.canvas=s;this.scrollZone=50;this.velocity=100;this.coefficient=1;}p.prototype.activate=function(){"use strict";this.activate=o;this.event=g.listen(document,'mousemove',this._onmousemove.bind(this));this.interval=setInterval(this._intervalHandler.bind(this),50);this.cursor=null;};p.prototype.deactivate=function(){"use strict";delete this.activate;this.event&&this.event.remove();this.event=null;clearInterval(this.interval);};p.prototype._onmousemove=function(event){"use strict";this.cursor=n.getEventPosition(event);};p.prototype._intervalHandler=function(){"use strict";if(!this.cursor)return;var s=this.canvas==document.body?l.getViewportBounds():new l(this.canvas),t=new l(this.cursor.y-s.t,s.r-this.cursor.x,s.b-this.cursor.y,this.cursor.x-s.l),u=new n(0,0);if(t.t<t.b&&t.t<this.scrollZone){u.y=-this.scrollZone+t.t;}else if(t.b<this.scrollZone)u.y=this.scrollZone-t.b;u.y=this._doMath(u.y);if(t.l<t.r&&t.l<this.scrollZone){u.x=-this.scrollZone+t.l;}else if(t.r<this.scrollZone)u.x=this.scrollZone-t.r;u.x=this._doMath(u.x);if(u.x||u.y){u.scrollElementBy(this.canvas);if(document.body==this.canvas){var v=n.getScrollPosition();u.scrollElementBy(this.canvas);var w=n.getScrollPosition();this.cursor=this.cursor.add(w.sub(v));}else u.scrollElementBy(this.canvas);h.inform('scroller/scroll',this.cursor);}};p.prototype._doMath=function(s){"use strict";s=(s>=0?Math.min(s,this.scrollZone):Math.max(s,-this.scrollZone));return Math.floor(Math.pow(s/this.scrollZone*this.velocity,this.coefficient));};p.findScrollParent=function(s){"use strict";var t;s=s.parentNode;while(s){if(s.scrollHeight!=s.offsetTop){t=m.get(s,'overflowY');if(t=='scroll'||t=='auto')return s;}s=s.parentNode;}return document.body;};function q(s){"use strict";if(!s)throw new Error('Element should be a DOM node');if(!(this instanceof q)){if(s instanceof Array){var t=[];s.forEach(function(u){t.push(new q(u));});return new i(q,t);}else return new q(s);}else{this.data={};this.handles=[];this.dom=s;this.boundingBox=null;this.useScroller=true;this.grabPctX=this.grabPctY=0;this.addHandle(this.dom);}}q.prototype.destroy=function(){"use strict";this.handles.forEach(function(s){this.removeHandle(s.obj);}.bind(this));this.data=this.dom=null;};q.prototype.adjustCursorPosition=function(){"use strict";var s=n.getElementDimensions(this.dom);this.cursorPositionVector=new n(parseInt(this.grabPctX*s.x,10),parseInt(this.grabPctY*s.y,10));};q.prototype._onclick=function(event){"use strict";if(this.active)return g.kill(event);};q.prototype._ongrab=function(s){"use strict";this.ongrab();if(this.useScroller){if(!this.scroller)this.scroller=new p(p.findScrollParent(this.dom));this.scroller.activate();}if(this.active){if(!this.oldPosition)this.oldPosition=this.dom.style.position;var t=k.getOffsetParent(this.dom);if(t!==document.body)s=s.sub(n.getElementPosition(t));this.dom.style.position=this.absolute?'absolute':'relative';s.sub(this.cursorPositionVector).setElementPosition(this.dom);}};q.prototype._onmousedown=function(event){"use strict";if(!((event.which&&event.which===1)||(event.button&&event.button===1)))return;var s=event.getTarget();if(j.isNodeOfType(s,['input','select','textarea','object','embed']))return true;var t=n.getEventPosition(event),u=n.getElementDimensions(this.dom);this.draggableInitialVector=n.getElementPosition(this.dom);this.cursorPositionVector=t.sub(this.draggableInitialVector);this.grabPctX=u.x===0?0:this.cursorPositionVector.x/u.x;this.grabPctY=u.y===0?0:this.cursorPositionVector.y/u.y;k.grab(this,event);if(this.gutter){this.cursorInitialVector=t;}else{this._setActive(true);this._ongrab(t);}return g.kill(event);};q.prototype._onmousemove=function(s){"use strict";if(!this.active)if(s.distanceTo(this.cursorInitialVector)>=this.gutter){this._setActive(true);this._ongrab(s);}if(this.active){var t=s.sub(this.cursorPositionVector),u;if(this.boundingBox){var v=l.newFromVectors(t,n.getElementDimensions(this.dom));v=v.boundWithin(this.boundingBox);t=v.getPositionVector();if(this.boundingBox.w()===0){u=new n(this.draggableInitialVector.x,t.y,'document');}else if(this.boundingBox.h()===0){u=new n(t.x,this.draggableInitialVector.y,'document');}else u=t;}else u=t;var w=k.getOffsetParent(this.dom);if(w!==document.body)u=u.sub(n.getElementPosition(w));u.setElementPosition(this.dom);this.ondrag(s);}};q.prototype._ondrop=function(){"use strict";this.scroller&&this.scroller.deactivate();if(this.active){setTimeout((function(){this._setActive(false);}).bind(this),0);this.ondrop();if(this.lastDragOver)this.lastDragOver.ondrop(this);}};q.prototype.killDrag=function(){"use strict";this._setActive(false);k._onmouseup();};q.prototype.forceDrop=function(){"use strict";k._onmouseup();};q.prototype.setBoundingBox=function(s){"use strict";this.boundingBox=s;return this;};q.prototype.resetPosition=function(){"use strict";this.dom.style.position=this.oldPosition;this.oldPosition=null;this.dom.style.left='';this.dom.style.top='';return this;};q.prototype.setUseAbsolute=function(s){"use strict";this.absolute=s;return this;};q.prototype.setDragHandler=function(s){"use strict";this.ondrag=s;return this;};q.prototype.setGrabHandler=function(s){"use strict";this.ongrab=s;return this;};q.prototype.setDropHandler=function(s){"use strict";this.ondrop=s;return this;};q.prototype.setGutter=function(s){"use strict";this.gutter=s;return this;};q.prototype.setNamespace=function(s){"use strict";this.namespace=s;return this;};q.prototype.setUseScroller=function(s){"use strict";this.useScroller=s;return this;};q.prototype.addHandle=function(s){"use strict";if(this.handles.length==1&&this.handles[0].obj==this.dom)this.removeHandle(this.dom);this.handles.push({obj:s,evt:[g.listen(s,'mousedown',this._onmousedown.bind(this)),g.listen(s,'click',this._onclick.bind(this)),g.listen(s,'drag',r),g.listen(s,'selectstart',r)]});return this;};q.prototype.removeHandle=function(s){"use strict";this.handles=this.handles.filter(function(t){if(t.obj!=s){return true;}else{t.evt.forEach(function(u){u.remove();});return false;}});};q.prototype.getDOM=function(){"use strict";return this.dom;};q.prototype.setKey=function(s,t){"use strict";this.data[s]=t;return this;};q.prototype.getKey=function(s){"use strict";return this.data[s];};q.prototype._setActive=function(s){"use strict";if(!this.dom)return;this.dom.activeDrag=this.active=s;for(var t=0;t<this.handles.length;t++)this.handles[t].obj.activeDrag=s;};q.prototype.ondrag=o;q.prototype.ongrab=o;q.prototype.ondrop=o;q.prototype.gutter=0;q.prototype.handles=null;function r(s){if(s.getTarget()!==document.activeElement)return s.kill();}e.exports=q;},null);
__d("Droppable",["Collection","Drag","Draggable","Vector","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){"use strict";if(!m)throw new Error('Element should be a DOM node');if(!(this instanceof l)){if(m instanceof Array){var n=[];m.forEach(function(o){n.push(new l(o));});return new g(l,n);}else return new l(m);}else{this.data={};this.dom=m;this.namespace=null;}}l.prototype.destroy=function(){"use strict";if(this.namespace)h.removeDroppable(this.namespace,this);this.data=this.dom=null;};l.prototype.setNamespace=function(m){"use strict";if(this.namespace)h.removeDroppable(this.namespace,this);this.namespace=m;h.addDroppable(m,this);return this;};l.prototype.setZIndex=function(m){"use strict";this.zIndex=m;return this;};l.prototype.hasPointMovedHorizontally=function(m){"use strict";var n=j.getElementPosition(this.dom);return n.x<=m.x&&this.dom.offsetWidth+n.x>m.x;};l.prototype.hasPointMovedVertically=function(m){"use strict";var n=j.getElementPosition(this.dom);return n.y<=m.y&&this.dom.offsetHeight+n.y>m.y;};l.prototype.hasPointMovedInside=function(m){"use strict";return this.hasPointMovedHorizontally(m)&&this.hasPointMovedVertically(m);};l.prototype.setDragOverHandler=function(m){"use strict";this.ondragover=m;return this;};l.prototype.setDragOverVectically=function(){"use strict";this.isDraggedOver=l.prototype.hasPointMovedVertically;return this;};l.prototype.setDragOverHorizontally=function(){"use strict";this.isDraggedOver=l.prototype.hasPointMovedHorizontally;return this;};l.prototype.setDragMoveHandler=function(m){"use strict";this.ondragmove=m;return this;};l.prototype.setDropHandler=function(m){"use strict";this.ondrop=m;return this;};l.prototype.zIndex=0;l.prototype.isDraggedOver=l.prototype.hasPointMovedInside;l.prototype.ondragover=k;l.prototype.ondragmove=k;l.prototype.ondrop=k;l.prototype.getDOM=i.prototype.getDOM;l.prototype.setKey=i.prototype.setKey;l.prototype.getKey=i.prototype.getKey;e.exports=l;},null);
__d("LeftNavItemClassicDraggableContainer.react",["React","DOMDimensions","Style","Draggable","Droppable","Arbiter"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=g.createClass({displayName:'LeftNavItemClassicDraggableContainer',propTypes:{itemID:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.number]).isRequired,section:g.PropTypes.object.isRequired,sortable:g.PropTypes.bool.isRequired},render:function(){return (g.createElement(g.DOM.div,{'data-itemid':this.props.itemID},this.props.children));},componentWillReceiveProps:function(n){if(!this.props.sortable&&n.sortable)this._mountDraggable(n.draggableBound);if(this.props.sortable&&!n.sortable)this._unmountDraggable();},_mountDraggable:function(n){var o='bookmarkItem',p=this.props.section,q=this.props.itemID,r=this.getDOMNode();this._draggable=(new j(r)).setNamespace(o).setUseAbsolute(true).setGutter(15).setBoundingBox(n).setGrabHandler(function(){var s=h.getElementDimensions(this.dom);i.set(this.dom,'width',s.width+'px');l.inform('LeftNavDragController/onItemEditDraggableGrab',{section:p,draggable:this});}).setDropHandler(function(){i.set(this.dom,'width','');this.resetPosition();l.inform('LeftNavDragController/onItemEditDraggableDrop',{section:p,draggable:this});});this._droppable=(new k(r)).setNamespace(o).setDragOverHandler(function(s){l.inform('LeftNavDragController/onItemEditDroppableDragOver',{section:p,draggable:s,targetItemID:q});});},_unmountDraggable:function(){if(this._draggable)this._draggable.destroy();if(this._droppable)this._droppable.destroy();}});e.exports=m;},null);
__d("LeftNavDragNUX.react",["ContextualDialog","ContextualDialogArrow","LayerAutoFocus","LayerRefocusOnHide","ReactLayer","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o=l.PropTypes,p=k.createClass({displayName:'LeftNavDragNUX',createLayer:function(r){var s=this.props.nuxType!=='remove'?"_53lz":"_53l-",t=this.getContextNode(),u={wrapperClassName:s,arrowDimensions:{offset:14,length:18}},v={alignment:this.props.alignment,arrowBehavior:h,context:t,offsetX:this.props.offsetX,offsetY:this.props.offsetY,position:this.props.position,theme:u},w=new g(v,r);w.disableBehavior(i);w.disableBehavior(j);w.conditionShow(this.props.shown);return w;},receiveProps:function(r){var s=this.getContextNode();this.layer.setContext(s);this.layer.setPosition(r.position).setAlignment(r.alignment).setOffsetX(r.offsetX).setOffsetY(r.offsetY).conditionShow(r.shown);},getContextNode:function(){var r=this.props.owner.getSiblingByRef(this.props.contextRef);return r&&r.getDOMNode();}}),q=l.createClass({displayName:'LeftNavDragNUX',propTypes:{contextRef:o.string,nuxType:o.oneOf(['add','sort','remove',null,undefined]),alignment:o.oneOf(['left','center','right']),offsetX:o.number,offsetY:o.number},render:function(){var r=this.props,s=r.nuxType,t=(function(v,w){var x={},y=Object.prototype.hasOwnProperty;if(v==null)throw new TypeError();for(var z in v)if(y.call(v,z)&&!y.call(w,z))x[z]=v[z];return x;})(r,{nuxType:1}),u=null;switch(s){case 'add':u="Add to Favorites";break;case 'sort':u="Rearrange";break;case 'remove':u="Remove from Favorites";break;case null:return null;case undefined:return null;}return (l.createElement(p,Object.assign({},t,{className:"dragTooltip",shown:s!==null,owner:this,nuxType:s}),u));}});e.exports=q;},null);
__d("LeftNavItemDraggableContainer.react",["React","LeftNavDragNUX.react","ReactLayeredComponentMixin","Arbiter","Draggable","Droppable","csx","DOMDimensions","DOMQuery","Style"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q=g.createClass({displayName:'LeftNavItemDraggableContainer',mixins:[i],propTypes:{itemID:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.number]).isRequired,section:g.PropTypes.object.isRequired,isPinned:g.PropTypes.bool.isRequired,sortable:g.PropTypes.bool.isRequired},getInitialState:function(){return {tooltip:null};},renderLayers:function(){if(!this.props.sortable)return {dragNUX:null};var r=this.state.tooltip==='remove'?g.createElement(h,{contextRef:"draggableContainer",nuxType:"remove",position:"above",alignment:"left",offsetX:20}):null;return {dragNUX:r};},render:function(){var r=this.props.isPinned?'pinnedItem':null;return (g.createElement(g.DOM.div,{ref:"draggableContainer",className:r,'data-itemid':this.props.itemID},this.props.children));},setTooltip:function(r){this.setState({tooltip:r});},componentDidMount:function(){if(this.props.sortable)this._mountDraggable();},componentWillUnmount:function(){if(this.props.sortable)this._unmountDraggable();},_mountDraggable:function(){var r='bookmarkItem',s=this,t=this.props.section,u=this.props.itemID,v=this.props.isPinned,w=this.getDOMNode(),x=o.scry(w,"._1agu")[0];if(!x)return;this._draggable=(new k(w)).setNamespace(r).setUseAbsolute(true).setGutter(15).addHandle(x).setGrabHandler(function(){var y=n.getElementDimensions(this.dom);p.apply(this.dom,{width:y.width+'px','z-index':'999'});j.inform('LeftNavDragController/onItemDraggableGrab',{section:t,dragContainer:s,draggable:this,isDraggedItemPinned:v});}).setDragHandler(function(y){j.inform('LeftNavDragController/onItemDraggableDrag',{dragContainer:s,isDraggedItemPinned:v,vector:y});}).setDropHandler(function(){p.apply(this.dom,{width:null,'z-index':null});this.resetPosition();s.setTooltip(null);j.inform('LeftNavDragController/onItemDraggableDrop',{section:t,draggable:this,isDraggedItemPinned:v});});if(t.props.id==='pinnedNav')this._droppable=(new l(w)).setNamespace(r).setDragOverHandler(function(y){j.inform('LeftNavDragController/onItemDroppableDragOver',{section:t,draggable:y,targetItemID:u});});},_unmountDraggable:function(){if(this._draggable)this._draggable.destroy();if(this._droppable)this._droppable.destroy();}});e.exports=q;},null);
__d("LeftNavItem.react",["Arbiter","Bootloader","DOMContainer.react","Image.react","LeftNavItemClassicDraggableContainer.react","LeftNavItemDraggableContainer.react","React","Run","XUISpinner.react","cx","joinClasses","LeftNavConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";var s=null,t=m.createClass({displayName:'LeftNavItem',render:function(){var u=r.gkResults.left_nav_drag_to_favorite===1,v=this.props,w=v.model,x=v.section,y=w.keys.some(function(ea){return ea===v.selectedKey;}),z=w.keys.some(function(ea){return ea===v.loadingKey;}),aa=x.props.id==='pinnedNav',ba=x.props.id==='bookmarksSeeAllEntSection',ca=(("sideNavItem")+(' '+"stat_elem")+(y?' '+"selectedItem":'')+(z?' '+"loading":'')),da=u?m.createElement(l,{itemID:w.id,section:x,sortable:w.sortable&&!ba,pinnable:w.pinnable,isPinned:w.pinned,draggableBound:this.props.draggableBound},this._renderBookmarkContent()):m.createElement(k,{itemID:w.id,section:x,sortable:aa&&v.inEditMode&&w.sortable,draggableBound:this.props.draggableBound},this._renderBookmarkContent());return (m.createElement(m.DOM.li,{key:w.id,className:ca,'data-sortable':w.sortable},da));},_renderBookmarkContent:function(){var u=r.gkResults.left_nav_drag_to_favorite===1,v=this.props.model,w=this.props.section,x=w.props.id==='pinnedNav',y=w.props.id==='bookmarksSeeAllEntSection',z=v.count>0,aa=v.auxcontent?m.createElement(i,{key:"auxpopover"},v.auxcontent):null,ba=this._renderCounter(v.count,y),ca=q('linkWrap',z?'hasCount':'noCount'),da=(("item")+(' '+"clearfix")+(x&&v.sortable?' '+"sortableItem":''));if(!s)n.onLoad(function(){h.loadModules(["BookmarkPopoverMenu.react"],function(ga){if(!s)s=ga;this.forceUpdate();}.bind(this));}.bind(this));var ea=null;if(s)ea=m.createElement(s,{key:"popover",navSection:this.props.section,navItem:this,editmenu:v.editmenu});var fa=[aa,ea,m.createElement(m.DOM.a,{key:"link",'data-testid':'left_nav_item_'+v.link.title,className:da,'data-gt':v.datagt,title:v.link.title,rel:v.link.rel,href:v.link.href,draggable:"false",onClick:function(){return g.inform('LeftNavController/setItemCount',v,0);}},m.createElement(m.DOM.div,{className:"rfloat"},m.createElement(o,{className:"uiSideNavSpinner",showOnAsync:true}),y?null:ba,v.sortable?m.createElement(m.DOM.span,{className:"grip"}):null),m.createElement(m.DOM.span,{className:"imgWrap"},m.createElement(j,{src:v.image,height:"16",width:"16",className:((u&&v.sortable&&!y?"_1agu":'')),draggable:"false"})),m.createElement(m.DOM.div,{className:ca},v.name,y?ba:null))];return fa;},_renderCounter:function(u,v){var w=u>0,x=(("count")+(' '+"uiSideNavCount")+(!w?' '+"hidden_elem":'')+(v?' '+"mlm":''));return (m.createElement(m.DOM.span,{className:x},m.createElement(m.DOM.span,{className:"countValue fss"},u<=20?u:'20+')));}});e.exports=t;},null);
__d("LeftNavItemPlaceholder.react",["React"],function(a,b,c,d,e,f,g){"use strict";var h=g.createClass({displayName:'LeftNavItemPlaceholder',render:function(){return (g.createElement(g.DOM.li,{className:"sideNavItem stat_elem"},g.createElement(g.DOM.a,{className:"item clearfix sortableItem"})));}});e.exports=h;},null);
__d("LeftNavSection.react",["Bootloader","React","Link.react","LeftRight.react","InlineBlock.react","LeftNavItem.react","LeftNavItemPlaceholder.react","ReactLayeredComponentMixin","Arbiter","cx","DOMQuery","Draggable","Droppable","fbt","Run","Style","LeftNavConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";var x=null,y=h.createClass({displayName:'LeftNavSection',mixins:[n],getDefaultProps:function(){return {sortable:false};},getInitialState:function(){return {inEditMode:false,glowingType:null,draggableBound:null,placeholderIdx:-1};},renderLayers:function(){var z=this.props.id==='bookmarksSeeAllEntSection';if(z)return {dragNUX:null};if(!x)u.onLoad(function(){g.loadModules(["LeftNavDragNUX.react"],function(ca){if(!x)x=ca;this.forceUpdate();}.bind(this));}.bind(this));var aa=this.state.glowingType,ba=null;if(aa==='add'||aa==='sort')if(x)ba=h.createElement(x,{contextRef:"sectionBody",nuxType:aa,position:"above",alignment:"center"});return {dragNUX:ba};},render:function(){var z=this,aa=this.props.model,ba=aa.items,ca=this.props.selectedKey,da=this.props.loadingKey,ea=this.state.inEditMode,fa=this.state.draggableBound;if(ba.length===0)return null;var ga=1,ha=ba.map(function(na){return (h.createElement(l,{key:na.id,model:na,section:z,selectedKey:ca,loadingKey:da,inEditMode:ea,draggableBound:fa,rank:ga++}));});if(this.state.placeholderIdx>=0)ha.splice(this.state.placeholderIdx,0,h.createElement(m,{key:"itemplaceholder",ref:"placeholder"}));var ia=this.state.glowingType,ja=(("homeSideNav")+(ia==='add'?' '+"_1492":'')+(ia==='sort'?' '+"_1493":'')+(ia==='remove'?' '+"_1494":'')),ka=(("uiSideNav")+(this._isPinnedSection()?' '+"droppableNav":'')+(!this._isPinnedSection()?' '+"nonDroppableNav":'')+(' '+"_3-8w")+(!ea?' '+"_3-96":'')),la=this._isPinnedSection()?h.createElement(h.DOM.div,{className:"actionLinks stat_elem"},h.createElement(i,{className:"navEditDone",onClick:function(){o.inform('LeftNavDragController/toggleEditMode',{section:z});}},h.createElement(h.DOM.span,{className:"navDone"},"Done"))):null,ma={nav_items_count:ba.length.toString(),nav_section:this.props.id.toString(),bm_sec:this.props.id.toString()};return (h.createElement(h.DOM.div,{id:this.props.id,className:ja,'data-ft':aa.dataft,ref:"sectionBody"},this._renderHeader(),h.createElement(h.DOM.ul,{className:ka,'data-gt':JSON.stringify(ma),'data-ft':aa.dataft},ha),la));},_renderHeader:function(){var z=this.props.model,aa;if(z.title){var ba=z.seeallhref?h.createElement(i,{href:z.seeallhref},h.createElement(j,null,h.createElement(h.DOM.span,{className:"sectionDragHandle"},z.title),z.remainingcount?h.createElement(k,{className:"_3-91"},h.createElement(h.DOM.div,{className:"bookmarksNavSeeAll"},z.seealltext)):null)):h.createElement(h.DOM.span,{className:"sectionDragHandle"},z.title);aa=h.createElement(h.DOM.h4,{className:"navHeader"},ba);}else aa=null;return aa;},componentDidMount:function(){var z=this._isPinnedSection(),aa=w.gkResults.left_nav_custom_section_ranking===1;if(z){o.inform('LeftNavDragController/setPinnedSection',this);this._updatePinnedSectionBound();}if(aa&&this.props.sortable)this._mountDraggable();},componentDidUpdate:function(){this._updatePinnedSectionBound();},componentWillUnmount:function(){if(this._isPinnedSection())o.inform('LeftNavDragController/setPinnedSection',null);this._unmountDraggable();},_updatePinnedSectionBound:function(){if(this._isPinnedSection())o.inform('LeftNavDragController/updatePinnedSectionBound');},_mountDraggable:function(){var z='leftNavSection',aa=this,ba=this.getDOMNode(),ca=q.scry(ba,'.sectionDragHandle')[0];if(!ca)return;this._draggable=(new r(ba)).setNamespace(z).setUseAbsolute(true).setGutter(15).addHandle(ca).setGrabHandler(function(){v.set(this.dom,'z-index',1024);o.inform('LeftNavDragController/onSectionDraggableGrab',aa);}).setDropHandler(function(){v.set(this.dom,'z-index',null);this.resetPosition();o.inform('LeftNavDragController/onSectionDraggableDrop');});this._droppable=(new s(ba)).setNamespace(z).setDragOverHandler(function(){o.inform('LeftNavDragController/onSectionDroppableDragOver',{targetSectionID:aa.props.id});});},_unmountDraggable:function(){if(this._draggable)this._draggable.destroy();if(this._droppable)this._droppable.destroy();},_isPinnedSection:function(){return this.props.id==='pinnedNav';}});e.exports=y;},null);
__d("LeftNavSectionPlaceholder.react",["React"],function(a,b,c,d,e,f,g){"use strict";var h=g.createClass({displayName:'LeftNavSectionPlaceholder',render:function(){var i={height:this.props.height+'px',width:this.props.width+'px'};return (g.createElement(g.DOM.div,{className:"homeSideNav",style:i},g.createElement(g.DOM.ul,{className:"uiSideNav"})));}});e.exports=h;},null);
__d("LeftNavContainer.react",["LeftNavSection.react","LeftNavSectionPlaceholder.react","React","Arbiter"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=i.createClass({displayName:'LeftNavContainer',getInitialState:function(){return {placeholderIdx:-1,placeholderWidth:0,placeholderHeight:0};},componentDidMount:function(){j.inform('LeftNavDragController/setLeftNavContainer',this);},render:function(){var l=this.props.model,m=i.createElement(g,{selectedKey:l.selectedKey,loadingKey:l.loadingKey,model:l.pinnedSection,key:"pinned",id:"pinnedNav"}),n=l.sections,o=n.map(function(p){return i.createElement(g,{selectedKey:l.selectedKey,loadingKey:l.loadingKey,model:p,key:p.id,id:p.id,sortable:true});});if(this.state.placeholderIdx>-1)o.splice(this.state.placeholderIdx,0,i.createElement(h,{key:"placeholder",width:this.state.placeholderWidth,height:this.state.placeholderHeight}));return (i.createElement(i.DOM.div,null,m,o));}});e.exports=k;},null);
__d("LeftNavDragController",["Arbiter","SubscriptionsHandler","CSS","DOMDimensions","DOMQuery","invariant","Rect","Style","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(r){this.$LeftNavDragController0=r;this.$LeftNavDragController1=null;this.$LeftNavDragController2=null;this.$LeftNavDragController3=null;this.$LeftNavDragController4=false;this.$LeftNavDragController5=new h();this.$LeftNavDragController5.addSubscriptions(g.subscribe('LeftNavDragController/setPinnedSection',this.$LeftNavDragController6.bind(this)),g.subscribe('LeftNavDragController/updatePinnedSectionBound',this.$LeftNavDragController7.bind(this)),g.subscribe('LeftNavDragController/toggleEditMode',this.$LeftNavDragController8.bind(this)),g.subscribe('LeftNavDragController/onItemEditDraggableGrab',this.$LeftNavDragController9.bind(this)),g.subscribe('LeftNavDragController/onItemEditDraggableDrop',this.$LeftNavDragControllera.bind(this)),g.subscribe('LeftNavDragController/onItemEditDroppableDragOver',this.$LeftNavDragControllerb.bind(this)),g.subscribe('LeftNavDragController/onItemDraggableGrab',this.$LeftNavDragControllerc.bind(this)),g.subscribe('LeftNavDragController/onItemDraggableDrag',this.$LeftNavDragControllerd.bind(this)),g.subscribe('LeftNavDragController/onItemDraggableDrop',this.$LeftNavDragControllere.bind(this)),g.subscribe('LeftNavDragController/onItemDroppableDragOver',this.$LeftNavDragControllerf.bind(this)));}p.prototype.destroy=function(){this.$LeftNavDragController5.release();};p.prototype.$LeftNavDragController6=function(r,s){this.$LeftNavDragController1=s;};p.prototype.$LeftNavDragController7=function(){this.$LeftNavDragController2=this.$LeftNavDragControllerg(false);};p.prototype.$LeftNavDragControllerc=function(r,s){var t=s,u=t.section,v=t.draggable,w=t.dragContainer,x=t.isDraggedItemPinned;if(!this.$LeftNavDragController2){v.killDrag();n.set(v.dom,'width','');v.resetPosition();return;}this.$LeftNavDragController3=w;i.addClass(this.$LeftNavDragController0,'draggingMode');if(x){var y=this.$LeftNavDragControllerh(u,v);this.$LeftNavDragController1.setState({placeholderIdx:y,glowingType:'sort'});}else this.$LeftNavDragController1.setState({glowingType:'add'});};p.prototype.$LeftNavDragControllerd=function(r,s){var t=s.vector,u=s.dragContainer,v=s.isDraggedItemPinned;if(this.$LeftNavDragControlleri(t)){var w=this.$LeftNavDragController1.state.placeholderIdx>-1;if(!w){var x=q(this.$LeftNavDragController1.props.model.items,function(y){return !y.sortable;});this.$LeftNavDragController1.setState({placeholderIdx:x+1,glowingType:v?'sort':'add'});this.$LeftNavDragController3.setTooltip(null);}}else{this.$LeftNavDragController1.setState({placeholderIdx:-1,glowingType:v?'remove':'add'});if(v)u.setTooltip('remove');}};p.prototype.$LeftNavDragControllere=function(r,s){var t=s.draggable,u=s.isDraggedItemPinned,v=t.dom.getAttribute('data-itemid');if(this.$LeftNavDragControlleri()){var w=this.$LeftNavDragControllerj(this.$LeftNavDragController1,v);if(w)g.inform('LeftNavController/updatePinnedSection',{idOrder:w});}else if(u)g.inform('LeftNavController/toggleFavorite',v);this.$LeftNavDragController3=null;i.removeClass(this.$LeftNavDragController0,'draggingMode');this.$LeftNavDragController1.setState({placeholderIdx:-1,glowingType:null});};p.prototype.$LeftNavDragControllerf=function(r,s){var t=s.section,u=s.draggable,v=s.targetItemID,w=i.hasClass(u.dom,'pinnedItem'),x=t.state.placeholderIdx>=0,y=t.props.model.items,z=q(y,function(ba){return ba.id===v;}),aa;if(x){aa=t.state.placeholderIdx<=z?z+1:z;}else aa=z;t.setState({placeholderIdx:aa,glowingType:w?'sort':'add'});if(w)this.$LeftNavDragController3.setTooltip(null);};p.prototype.$LeftNavDragController8=function(r,s){var t=s.section;if(!t.state.inEditMode){var u=this.$LeftNavDragControllerg(true);if(u){u.l=u.r=0;t.setState({draggableBound:u});}}i.toggleClass(this.$LeftNavDragController0,'editMode');t.setState({inEditMode:!t.state.inEditMode});};p.prototype.$LeftNavDragController9=function(r,s){var t=s.section,u=s.draggable,v=this.$LeftNavDragControllerh(t,u);t.setState({placeholderIdx:v});};p.prototype.$LeftNavDragControllera=function(r,s){var t=s.section,u=s.draggable,v=this.$LeftNavDragControllerh(t,u),w=t.state.placeholderIdx;if(w!==v&&w!==v+1){var x=t.props.model,y=x.items[v];g.inform('LeftNavController/updatePinnedSection',{idOrder:this.$LeftNavDragControllerj(t,y.id)});}t.setState({placeholderIdx:-1});};p.prototype.$LeftNavDragControllerb=function(r,s){var t=s.section,u=s.draggable,v=s.targetItemID,w=t.props.model,x=this.$LeftNavDragControllerh(t,u);if(x>=0){var y=q(w.items,function(aa){return aa.id===v;}),z=t.state.placeholderIdx<=y?y+1:y;t.setState({placeholderIdx:z});}};p.prototype.$LeftNavDragControlleri=function(r){if(r){var s=this.$LeftNavDragController2;this.$LeftNavDragController4=s&&r.x>=s.l&&r.x<=s.r&&r.y>=s.t&&r.y<=s.b;}return this.$LeftNavDragController4;};p.prototype.$LeftNavDragControllerj=function(r,s){if(!r)return undefined;var t=r.props.model.items,u=r.state.placeholderIdx,v=[];t.forEach(function(w,x){if(x===u)v.push(s);if(w.sortable&&w.id!==s)v.push(w.id);});if(u===t.length)v.push(s);return v;};p.prototype.$LeftNavDragControllerh=function(r,s){var t=r.props.model,u=s.dom.getAttribute('data-itemid');return (q(t.items,function(v){return v.id.toString()===u;}));};p.prototype.$LeftNavDragControllerg=function(r){var s=this.$LeftNavDragController1,t=s&&s.getDOMNode();if(!t){l(false);return undefined;}var u=k.scry(t,'li.sideNavItem');if(r)u=u.filter(function(ea){return ea.getAttribute('data-sortable')==='true';});if(u.length>0){var v=u[0],w=j.getElementDimensions(v).width,x=u[u.length-1],y=j.getElementDimensions(x).height,z=o.getElementPosition(v).y,aa=o.getElementPosition(x).y+y;if(s.state.placeholderIdx>=0){var ba=s.refs.placeholder.getDOMNode(),ca=o.getElementPosition(ba),da=j.getElementDimensions(ba);z=Math.min(z,ca.y);aa=Math.max(aa,ca.y+da.height);}return new m(z,o.getElementPosition(v).x+w,aa,o.getElementPosition(v).x);}else return null;};function q(r,s){for(var t=0;t<r.length;t++)if(s(r[t]))return t;return -1;}e.exports=p;},null);
__d("LeftNavSectionDragController",["Arbiter","SubscriptionsHandler","DOMDimensions"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(){this.$LeftNavSectionDragController0=null;this.$LeftNavSectionDragController1=new h();this.$LeftNavSectionDragController1.addSubscriptions(g.subscribe('LeftNavDragController/setLeftNavContainer',this.$LeftNavSectionDragController2.bind(this)),g.subscribe('LeftNavDragController/onSectionDraggableGrab',this.$LeftNavSectionDragController3.bind(this)),g.subscribe('LeftNavDragController/onSectionDraggableDrop',this.$LeftNavSectionDragController4.bind(this)),g.subscribe('LeftNavDragController/onSectionDroppableDragOver',this.$LeftNavSectionDragController5.bind(this)));}j.prototype.destroy=function(){this.$LeftNavSectionDragController1.release();};j.prototype.$LeftNavSectionDragController2=function(l,m){this.$LeftNavSectionDragController6=m;};j.prototype.$LeftNavSectionDragController3=function(l,m){this.$LeftNavSectionDragController0=m;var n=this.$LeftNavSectionDragController6.props.model.sections,o=k(n,function(q){return q.id===m.props.id;}),p=i.getElementDimensions(m.getDOMNode());this.$LeftNavSectionDragController6.setState({placeholderIdx:o,placeholderWidth:p.width,placeholderHeight:p.height});};j.prototype.$LeftNavSectionDragController4=function(){var l=this.$LeftNavSectionDragController6,m=this.$LeftNavSectionDragController0.props.id,n=l.state.placeholderIdx,o=k(l.props.model.sections,function(q){return q.id===m;});if(n!==o&&n!==o+1){var p=this.$LeftNavSectionDragController7(m);g.inform('LeftNavController/updateSectionOrder',{idOrder:p});}this.$LeftNavSectionDragController0=null;this.$LeftNavSectionDragController6.setState({placeholderIdx:-1,placeholderWidth:0,placeholderHeight:0});};j.prototype.$LeftNavSectionDragController5=function(l,m){var n=m.targetSectionID,o=this.$LeftNavSectionDragController6,p=o.props.model.sections,q=o.state.placeholderIdx>=0,r=k(p,function(t){return t.id===n;}),s;if(q){s=o.state.placeholderIdx<=r?r+1:r;}else s=r;o.setState({placeholderIdx:s});};j.prototype.$LeftNavSectionDragController7=function(l){var m=this.$LeftNavSectionDragController6,n=m.props.model.sections,o=m.state.placeholderIdx,p=n.reduce(function(q,r,s){if(s===o)q.push(l);if(r.id!==l)q.push(r.id);return q;},[]);if(o===n.length)p.push(l);return p;};function k(l,m){for(var n=0;n<l.length;n++)if(m(l[n]))return n;return -1;}e.exports=j;},null);
__d("LeftNavController",["React","LeftNavContainer.react","LeftNavDragController","LeftNavSectionDragController","AsyncRequest","Arbiter","Event","SubscriptionsHandler","Run","$","copyProperties","CSS","debounce","DOMDimensions","Locale","URI","Vector","NavigationMessage","ChannelConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";var z,aa,ba,ca,da,ea=null,fa,ga={init:function(mb,nb){z=mb;aa=nb;ba=new i(z);ca=new j();fa=false;da=new n();da.addSubscriptions(m.listen(window,'resize',s(ia,200)),l.subscribe('LeftNavController/toggleFavorite',wa),l.subscribe('LeftNavController/updatePinnedSection',xa),l.subscribe('LeftNavController/setItemCount',function(pb,qb,rb){return la(qb,rb);}),l.subscribe(y.getArbiterType('nav_update_counts'),ma),l.subscribeOnce('AsyncLayout/initialized',function(){return fa=true;}),l.subscribe(x.NAVIGATION_ITEM_REMOVED,na),l.subscribe(x.NAVIGATION_COMPLETED,ta),l.subscribe(x.NAVIGATION_FAILED,ua),l.subscribe(x.NAVIGATION_COUNT_UPDATE,va),l.subscribe(x.NAVIGATION_SELECT,sa),l.subscribe('LeftNavController/updateSectionOrder',ya));var ob=fb(aa.selectedKey);if(ob)ob.count=0;ia();ha();o.onLeave(this.uninstall.bind(this));},uninstall:function(){fa=false;da.release();ba.destroy();ca.destroy();},initPageTransitions:function(mb){mb.registerHandler(function(nb){return fa&&oa(nb);},6);},mountSeeAllPayload:function(mb){ea=mb;}};function ha(){var mb=g.createElement(h,{model:aa});g.renderComponent(mb,z);}function ia(){if(!z)return;var mb=w.getElementPosition(z).x;r.conditionClass(z,'uiNarrowSideNav',mb<20||(u.isRTL()&&mb+t.getElementDimensions(z).width<t.getElementDimensions(p('globalContainer')).width));}function ja(mb){aa.loadingKey=null;aa.selectedKey=mb||aa.defaultKey;ha();}function ka(mb){aa.loadingKey=mb;ha();}function la(mb,nb){mb.count=nb;ha();}function ma(mb,nb){var ob=nb.obj,pb=ob.items;pb.forEach(function(qb){var rb=fb(qb.key);if(rb)rb.count=rb.count+qb.count;});ha();}function na(mb,nb){var ob;function pb(rb,sb){return rb.keys.some(function(tb){return tb===sb;});}for(var qb=0;qb<aa.sections.length;qb++){ob=ib(aa.sections[qb].items,function(rb){return pb(rb,nb);});if(ob)break;}ib(aa.pinnedSection.items,function(rb){return pb(rb,nb);});ha();}function oa(mb){var nb=gb(mb);return nb&&nb.endpoint&&pa(nb,mb);}function pa(mb,nb){ka(mb.keys[0]);la(mb,0);ra(mb.endpoint,q(qa(mb,nb),nb.getQueryData()));return true;}function qa(mb,nb){var ob={};ob.sidecol=true;ob.path=nb.getPath();var pb=hb(mb.keys);pb=pb.text?pb.text:pb.numeric;ob.sk=pb;ob.key=pb;return ob;}function ra(mb,nb){nb.endpoint=mb;l.inform(x.NAVIGATION_BEGIN,{useAjaxPipe:true,params:nb});}function sa(mb,nb){var ob=nb.sk;if(nb.asLoading){ka(ob);}else ja(ob);}function ta(mb,nb){var ob=aa.loadingKey;ja(ob);}function ua(mb,nb){ka(null);}function va(mb,nb){var ob=fb(nb&&nb.key);if(ob)la(ob,nb.hide?0:ob.count+nb.count);}function wa(mb,nb){var ob=cb(nb),pb=aa.pinnedSection;if(!ob){if(!ea)return;ob=kb(ea,function(tb){return tb.id===nb;});if(!ob)return;ob=q({},ob);ob.pinned=true;pb.items.push(ob);new k().setURI('/ajax/bookmark/add/').setData({id:ob.keys[0]}).send();}else{var qb=bb(ob);if(db(nb)){ob.pinned=false;var rb=jb(pb.items,function(tb){return tb.id===ob.id;});if(rb>=0){pb.items.splice(rb,1);if(qb)qb.items.unshift(ob);new k().setURI('/ajax/bookmark/delete/').setData({id:ob.keys[0]}).send();}}else{ob.pinned=true;var sb=jb(qb.items,function(tb){return tb.id===ob.id;});if(qb&&sb>=0){qb.items.splice(sb,1);pb.items.push(ob);new k().setURI('/ajax/bookmark/add/').setData({id:ob.keys[0]}).send();}}}ha();}function xa(mb,nb){var ob=nb.idOrder,pb=aa.pinnedSection,qb=pb.items.filter(function(sb){return !sb.sortable;});ob.forEach(function(sb){var tb=kb(pb.items,function(vb){return vb.id===sb;});if(tb){qb.push(tb);}else if(tb=cb(sb)){var ub=bb(tb);ib(ub.items,function(vb){return vb.id===tb.id;});qb.push(tb);tb.pinned=true;}});pb.items=qb;var rb=qb.map(function(sb){return sb.keys[0];});new k().setURI('/ajax/bookmark/edit/').setData({ids:rb}).send();ha();}function ya(mb,nb){var ob=nb.idOrder,pb=aa.sections;aa.sections=ob.reduce(function(qb,rb){var sb=pb.find(function(tb){return tb.id===rb;});if(sb)qb.push(sb);return qb;},[]);new k().setURI('/bookmark/section/edit/').setData({nav_section_names:ob}).send();ha();}function za(mb){var nb=v.getRequestURI();return ((mb.getDomain()===nb.getDomain())&&(mb.getPath()==='/'||mb.getPath()==='/home.php'));}function ab(mb){if(mb==='pinnedNav'){return aa.pinnedSection;}else return (aa.sections.filter(function(nb){return nb.id===mb;})[0]);}function bb(mb){return ab(lb[mb.type]);}function cb(mb){mb=mb.toString();return eb(function(nb){return nb.id.toString()===mb;});}function db(mb){mb=mb.toString();var nb=ab('pinnedNav');return nb.items.some(function(ob){return ob.id.toString()===mb;});}function eb(mb){for(var nb=0;nb<aa.sections.length;nb++){var ob=kb(aa.sections[nb].items,mb);if(ob)return ob;}return kb(aa.pinnedSection.items,mb);}function fb(mb){return eb(function(nb){return nb.keys.some(function(ob){return ob===mb;});});}function gb(mb){var nb=mb.getQueryData().sk;if(nb){return fb(nb);}else if(za(mb)){return fb(aa.defaultKey);}else return eb(function(ob){return ob.path&&ob.path.some(function(pb){return pb===mb.getPath();});});}function hb(mb){var nb=/^(app|group|fl)_/,ob={};for(var pb=0;pb<mb.length;pb++){var qb=nb.test(mb[pb]);if(qb&&!ob.numeric){ob.numeric=mb[pb];}else if(!qb&&!ob.text)ob.text=mb[pb];if(ob.numeric&&ob.text)break;}return ob;}function ib(mb,nb){for(var ob=0;ob<mb.length;ob++)if(nb(mb[ob])){var pb=mb[ob];mb.splice(ob,1);return pb;}return undefined;}function jb(mb,nb){for(var ob=0;ob<mb.length;ob++)if(nb(mb[ob]))return ob;return -1;}function kb(mb,nb){return mb[jb(mb,nb)];}var lb={favorites:'pinnedNav',profiles:'pinnedNav',company:'companyNav',apps:'appsNav',groups:'groupsNav',pages:'pagesNav',lists:'listsNav',interests:'interestsNav',connect_apps:'connectNav',type_user:'pinnedNav',type_group:'groupsNav',type_company:'companyNav',type_page:'pagesNav',type_friend_list:'listsNav',type_interest_list:'interestsNav',type_non_canvas_app:'appsNav',type_facebook_app:'appsNav',type_canvas_app_game:'appsNav',type_canvas_app_non_game:'appsNav',type_curated_feed:'interestsNav',type_game_tool:'appsNav',type_page_tool:'pagesNav',type_pinnable_page_tool:'pagesNav',type_developer:'developerNav',type_developer_tool:'developerNav'};e.exports=ga;},null);
__d("BanzaiNectar",["Banzai"],function(a,b,c,d,e,f,g){function h(j){return {log:function(k,l,m){var n={e:l,a:m};g.post('nectar:'+k,n,j);}};}var i=h();i.create=h;e.exports=i;},null);
__d("VideoAutoplayPlayButton",["CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i){var j={},k={getClicked:function(l){if(j.hasOwnProperty(l))return j[l].clicked;return false;},register:function(l,m,n){j[l]=h.listen(m,'click',function(){g.removeClass(m,"_5vos");g.show(n);j[l].clicked=true;});},unregister:function(l){if(j.hasOwnProperty(l))j[l].remove();}};e.exports=k;},null);